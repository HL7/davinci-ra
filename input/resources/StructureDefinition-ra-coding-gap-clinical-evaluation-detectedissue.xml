<?xml version="1.0" encoding="UTF-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
    <id value="ra-coding-gap-clinical-evaluation-detectedissue"/>
    <url value="http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-coding-gap-clinical-evaluation-detectedissue"/>
    <name value="RiskAdjustmentCodingGapClinicalEvaluationDetectedIssueProfile"/>
    <title value="Risk Adjustment Coding Gap Clinical Evaluation Detected Issue Profile"/>
    <status value="draft"/>
    <publisher value="Da Vinci Project"/>
    <description value="This is draft Risk Adjustment Coding Gap Clinical Evaluation DetectedIssue profile that is under development. 
    This profile describes issues identified with the coding gaps that were in the original coding gap reports generated by the payr 
    when providers/certified coders conducting their review. It contains the clinical evaluation evidence used by providers/certified coders to support the identified issues."/>
    <fhirVersion value="4.0.1"/>
    <kind value="resource"/>
    <abstract value="false"/>
    <type value="DetectedIssue"/>
    <baseDefinition value="http://hl7.org/fhir/StructureDefinition/DetectedIssue"/>
    <derivation value="constraint"/>
    <differential>
        <element id="DetectedIssue">
            <path value="DetectedIssue"/>
        </element>
        <!--
        <element id="DetectedIssue.extension:groupReference">
            <path value="DetectedIssue.extension"/>
            <sliceName value="groupReference"/>
            <short value="This id references the `MeasureReport.group.id`, which allows linking a detected issue to a specific Condition Category (CC) coding gap. (Discussion Note: reference to group id is requried so a detected issue can be linked to a specific HCC, the cardinality is 1..1)"/>
            <min value="1"/>
            <max value="1"/>
            <type>
                <code value="Extension"/>
                <profile value="http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-groupReference"/>
            </type>
            <mustSupport value="true"/>
        </element>
        -->
        <element id="DetectedIssue.modifierExtension:codingGapType">
            <path value="DetectedIssue.modifierExtension"/>
            <sliceName value="codingGapType"/>
            <min value="1"/>
            <max value="1"/>
            <type>
                <code value="Extension"/>
                <profile value="http://hl7.org/fhir/us/davinci-ra/StructureDefinition/extension-codingGapType"/>
            </type>
            <mustSupport value="true"/>
            <isModifier value="true"/>
            <isModifierReason value="Type of the detected issue with coding gap during clinical evaluation"/>
            <binding>
                <strength value="extensible"/>
                <valueSet value="http://hl7.org/fhir/us/davinci-ra/ValueSet/clinical-evaluation-coding-gap-type"/>
            </binding>            
        </element>
        <element id="DetectedIssue.code">
            <path value="DetectedIssue.code"/>
            <min value="1"/>
            <fixedCodeableConcept>
                <coding>
                    <system value="http://terminology.hl7.org/CodeSystem/v3-ActCode"/>
                    <code value="CODINGGAP"/>
                    <display value="Coding Gaps"/>
                </coding>
            </fixedCodeableConcept>
            <mustSupport value="true"/>
        </element>
        <element id="DetectedIssue.patient">
            <path value="DetectedIssue.patient"/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient"/>
            </type>
            <min value="1"/>
            <mustSupport value="true"/>
        </element>
        <element id="DetectedIssue.evidence">
            <path value="DetectedIssue.evidence"/>
            <short value="Clinical evaluation evidence for the detected issue of Condition Category"/>
            <min value="1"/>
            <mustSupport value="true"/>
        </element>
        <element id="DetectedIssue.evidence.detail">
            <path value="DetectedIssue.evidence.detail"/>
            <!--
            <type>
                <code value="Reference"/>
            </type>
            -->
            <min value="1"/>
            <mustSupport value="true"/>
        </element>
    <!--
        <element id="DetectedIssue.detail">
            <path value="DetectedIssue.detail"/>
            <min value="1"/>
            <max value="1"/>
            <mustSupport value="true"/>
        </element> -->
    </differential>
</StructureDefinition>
