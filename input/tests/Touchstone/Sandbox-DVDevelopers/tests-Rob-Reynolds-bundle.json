{
  "resourceType": "Bundle",
  "id": "tests-Rob-Reynolds-bundle",
  "type": "transaction",
  "entry": [ {
    "resource": {
      "resourceType": "TestScript",
      "id": "PeriodEnd-In-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>PeriodEnd-In-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/PeriodEnd-In-RA",
      "name": "PeriodEnd-In-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/ra-patient01",
        "description": "Default end of a gaps through subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "1",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "PeriodEnd-In",
        "name": "PeriodEnd-In",
        "description": "Query for the gaps in care using periodEnd in parameters. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/PeriodEnd-In-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "PeriodEnd-None-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>PeriodEnd-None-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/PeriodEnd-None-RA",
      "name": "PeriodEnd-None-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/ra-patient01",
        "description": "Default end of a gaps through subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "0",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "PeriodEnd-None",
        "name": "PeriodEnd-None",
        "description": "Query for the gaps in care using periodEnd missing parameters. Expected response is OperationOutcome (error).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 500(Internal Server Error).",
            "direction": "response",
            "responseCode": "500",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is an OperationOutcome.",
            "direction": "response",
            "resource": "OperationOutcome",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/PeriodEnd-None-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "PeriodEnd-Out-Post-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>PeriodEnd-Out-Post-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/PeriodEnd-Out-Post-RA",
      "name": "PeriodEnd-Out-Post-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2022-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/ra-patient01",
        "description": "Default end of a gaps through subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "1",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "PeriodEnd-Out-Post",
        "name": "PeriodEnd-Out-Post",
        "description": "Query for the gaps in care using periodEnd out post parameters. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/PeriodEnd-Out-Post-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "PeriodEnd-Out-Prior-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>PeriodEnd-Out-Prior-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/PeriodEnd-Out-Prior-RA",
      "name": "PeriodEnd-Out-Prior-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2020-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/ra-patient01",
        "description": "Default end of a gaps through subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "0",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "PeriodEnd-Out-Prior",
        "name": "PeriodEnd-Out-Prior",
        "description": "Query for the gaps in care using periodEnd out prior parameters. Expected response is OperationOutcome (error).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 500(Internal Server Error).",
            "direction": "response",
            "responseCode": "500",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is an OperationOutcome.",
            "direction": "response",
            "resource": "OperationOutcome",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/PeriodEnd-Out-Prior-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "PeriodStart-In-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>PeriodStart-In-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/PeriodStart-In-RA",
      "name": "PeriodStart-In-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/ra-patient01",
        "description": "Default end of a gaps through subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "1",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "PeriodStart-In",
        "name": "PeriodStart-In",
        "description": "Query for the gaps in care using periodStart in parameters. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/PeriodStart-In-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "PeriodStart-None-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>PeriodStart-None-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/PeriodStart-None-RA",
      "name": "PeriodStart-None-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/ra-patient01",
        "description": "Default end of a gaps through subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "0",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "PeriodStart-None",
        "name": "PeriodStart-None",
        "description": "Query for the gaps in care using periodStart missing parameters. Expected response is OperationOutcome (error).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 500(Internal Server Error).",
            "direction": "response",
            "responseCode": "500",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is an OperationOutcome.",
            "direction": "response",
            "resource": "OperationOutcome",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/PeriodStart-None-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "PeriodStart-Out-Post-End-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>PeriodStart-Out-Post-End-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/PeriodStart-Out-Post-End-RA",
      "name": "PeriodStart-Out-Post-End-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2022-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/ra-patient01",
        "description": "Default end of a gaps through subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "0",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "PeriodStart-Out-Post-End",
        "name": "PeriodStart-Out-Post-End",
        "description": "Query for the gaps in care using periodStart out post parameters. Expected response is OperationOutcome (error).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 500(Internal Server Error).",
            "direction": "response",
            "responseCode": "500",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is an OperationOutcome.",
            "direction": "response",
            "resource": "OperationOutcome",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/PeriodStart-Out-Post-End-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "PeriodStart-Out-Post-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>PeriodStart-Out-Post-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/PeriodStart-Out-Post-RA",
      "name": "PeriodStart-Out-Post-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2022-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2022-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/ra-patient01",
        "description": "Default end of a gaps through subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "0",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "PeriodStart-Out-Post",
        "name": "PeriodStart-Out-Post",
        "description": "Query for the gaps in care using periodStart out post parameters. Expected response is 200 OK.",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/PeriodStart-Out-Post-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "PeriodStart-Out-Prior-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>PeriodStart-Out-Prior-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/PeriodStart-Out-Prior-RA",
      "name": "PeriodStart-Out-Prior-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2020-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/ra-patient01",
        "description": "Default end of a gaps through subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "1",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "PeriodStart-Out-Prior",
        "name": "PeriodStart-Out-Prior",
        "description": "Query for the gaps in care using periodStart out prior parameters. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/PeriodStart-Out-Prior-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Subject-Group-In-One-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Subject-Group-In-One-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Subject-Group-In-One-RA",
      "name": "Subject-Group-In-One-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Group/ra-group01",
        "description": "Subject group."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "1",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "Subject-Group-In-One",
        "name": "Subject-Group-In-One",
        "description": "Query for the gaps in care using subject/Group in one parameters. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Subject-Group-In-One-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Subject-Group-In-Two-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Subject-Group-In-Two-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Subject-Group-In-Two-RA",
      "name": "Subject-Group-In-Two-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Group/ra-group02",
        "description": "Subject group."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "3",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "Subject-Group-In-Two",
        "name": "Subject-Group-In-Two",
        "description": "Query for the gaps in care using subject/Group in two parameters. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Subject-Group-In-Two-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Subject-Group-Out-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Subject-Group-Out-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Subject-Group-Out-RA",
      "name": "Subject-Group-Out-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Group/bad-value",
        "description": "Subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "0",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "Subject-Group-Out",
        "name": "Subject-Group-Out",
        "description": "Query for the gaps in care using subject/Group out parameters. Expected response is 404 (Not found).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 404(Not found).",
            "direction": "response",
            "response": "notFound",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is an OperationOutcome.",
            "direction": "response",
            "resource": "OperationOutcome",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Subject-Group-Out-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Subject-Patient-In-No-HCC-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Subject-Patient-In-No-HCC-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Subject-Patient-In-No-HCC-RA",
      "name": "Subject-Patient-In-No-HCC-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/ra-patient04",
        "description": "Patient subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "1",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "Subject-Patient-In-No-HCC",
        "name": "Subject-Patient-In-No-HCC",
        "description": "Query for the gaps in care using subject/Patient in parameters. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are no Groups in the Measure Report in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).group.count()",
            "operator": "equals",
            "value": "0",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Subject-Patient-In-No-HCC-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Subject-Patient-In-No-Reports-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Subject-Patient-In-No-Reports-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Subject-Patient-In-No-Reports-RA",
      "name": "Subject-Patient-In-No-Reports-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/ra-patient00",
        "description": "Subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "0",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "Subject-Patient-In-No-Reports",
        "name": "Subject-Patient-In-No-Reports",
        "description": "Query for the gaps in care using subject/Patient out parameters. Expected response is 202 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there is a Patient resource in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(Patient)).count()",
            "operator": "equals",
            "value": "1",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Subject-Patient-In-No-Reports-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Subject-Patient-In-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Subject-Patient-In-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Subject-Patient-In-RA",
      "name": "Subject-Patient-In-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/ra-patient01",
        "description": "Patient subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "1",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "Subject-Patient-In",
        "name": "Subject-Patient-In",
        "description": "Query for the gaps in care using subject/Patient in parameters. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Subject-Patient-In-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Subject-Patient-None-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Subject-Patient-None-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Subject-Patient-None-RA",
      "name": "Subject-Patient-None-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "0",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "Subject-Patient-None",
        "name": "Subject-Patient-None",
        "description": "Query for the gaps in care using subject/Patient none parameters. Expected response is OperationOutcome (error).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 500(Internal Server Error).",
            "direction": "response",
            "responseCode": "500",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is an OperationOutcome.",
            "direction": "response",
            "resource": "OperationOutcome",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Subject-Patient-None-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Subject-Patient-Out-No-PatientOrGroup-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Subject-Patient-Out-No-PatientOrGroup-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Subject-Patient-Out-No-PatientOrGroup-RA",
      "name": "Subject-Patient-Out-No-PatientOrGroup-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "bad-value",
        "description": "Subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "0",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "Subject-Patient-Out-No-PatientOrGroup",
        "name": "Subject-Patient-Out-No-PatientOrGroup",
        "description": "Query for the gaps in care using subject/Patient out parameters. Expected response is 202 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 500(Internal Server Error).",
            "direction": "response",
            "responseCode": "500",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is an OperationOutcome.",
            "direction": "response",
            "resource": "OperationOutcome",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Subject-Patient-Out-No-PatientOrGroup-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Subject-Patient-Out-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Subject-Patient-Out-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Subject-Patient-Out-RA",
      "name": "Subject-Patient-Out-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/bad-value",
        "description": "Subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "0",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "Subject-Patient-Out",
        "name": "Subject-Patient-Out",
        "description": "Query for the gaps in care using subject/Patient out parameters. Expected response is 404 (Not found).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 404(Not found).",
            "direction": "response",
            "response": "notFound",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is an OperationOutcome.",
            "direction": "response",
            "resource": "OperationOutcome",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Subject-Patient-Out-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Result-Bundle-Duplicates-Out-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Result-Bundle-Duplicates-Out-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Result-Bundle-Duplicates-Out-RA",
      "name": "Result-Bundle-Duplicates-Out-RA-json",
      "status": "active",
      "date": "2022-05-01",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Test that duplicate Bundle entries cause and error.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      } ],
      "variable": [ {
        "name": "bundleId",
        "defaultValue": "result-evaluatedresources-duplicates-out-ra",
        "description": "Enter a resource id for a valid Bundle on the destination system."
      } ],
      "test": [ {
        "id": "Result-Bundle-Duplicates-Out",
        "name": "Result-Bundle-Duplicates-Out",
        "description": "Query for the RA Bundles. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://terminology.hl7.org/CodeSystem/testscript-operation-codes",
              "code": "read"
            },
            "resource": "Bundle",
            "description": "Bundle read operation with HTTP Header Accept set to JSON format.",
            "accept": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "origin": 1,
            "params": "/${bundleId}",
            "responseId": "ReadBundleResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "fhir_comments": [ " TODO implment a check that ensures bundle entries are unique.\n      <action>\n      <assert>\n        <extension url=\"http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail\">\n          <valueBoolean value=\"false\"/>\n        </extension>\n        <description value=\"Verify that the bundle has no duplicates.\"/>\n        <direction value=\"response\"/>\n        <expression value=\"\"/>\n        <operator value=\"equals\"/>\n        <value value=\"\"/>\n        <warningOnly value=\"false\"/>\n      </assert>\n    </action> " ],
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Bundle.",
            "direction": "response",
            "resource": "Bundle",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Result-Bundle-Duplicates-Out-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Result-EvaluatedResources-Condition-In-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Result-EvaluatedResources-Condition-In-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Result-EvaluatedResources-Condition-In-RA",
      "name": "Result-EvaluatedResources-Condition-In-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get MeasureReport result. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/result-evaluatedresources-condition-in-ra",
        "description": "Patient subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "1",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      }, {
        "name": "expectedNumPatients",
        "defaultValue": "1",
        "description": "Number of expected Patient resources in response.  Will be validated in the test."
      }, {
        "name": "expectedNumEncounters",
        "defaultValue": "2",
        "description": "Number of expected Encounter resources in response.  Will be validated in the test."
      }, {
        "name": "expectedNumConditions",
        "defaultValue": "2",
        "description": "Number of expected Condition resources in response.  Will be validated in the test."
      }, {
        "name": "expectedNumObservations",
        "defaultValue": "0",
        "description": "Number of expected Observation resources in response.  Will be validated in the test."
      }, {
        "name": "expectedNumBundleEntries",
        "defaultValue": "6",
        "description": "Number of expected Bundle entries in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "Result-EvaluatedResources-Condition-In",
        "name": "Result-EvaluatedResources-Condition-In",
        "description": "Query for the Risk Adjustment MeasureReport using subject/Patient in parameters. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm the returned Bundle profile",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.meta.profile",
            "value": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport-bundle",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of parameter elements expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.count()",
            "operator": "equals",
            "value": "1",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of patient resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(Patient)).count()",
            "operator": "equals",
            "value": "${expectedNumPatients}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of encounter resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(Encounter)).count()",
            "operator": "equals",
            "value": "${expectedNumEncounters}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of condition resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(Condition)).count()",
            "operator": "equals",
            "value": "${expectedNumConditions}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of observation resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(Observation)).count()",
            "operator": "equals",
            "value": "${expectedNumObservations}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of Bundle entries expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.count()",
            "operator": "equals",
            "value": "${expectedNumBundleEntries}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Result-EvaluatedResources-Condition-In-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Result-EvaluatedResources-Count-In-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Result-EvaluatedResources-Count-In-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Result-EvaluatedResources-Count-In-RA",
      "name": "Result-EvaluatedResources-Count-In-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get MeasureReport result. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/result-evaluatedresources-count-in-ra",
        "description": "Patient subject."
      } ],
      "test": [ {
        "id": "Result-EvaluatedResources-Count-In",
        "name": "Result-EvaluatedResources-Count-In",
        "description": "Query for the Risk Adjustment MeasureReport using subject/Patient in parameters. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm the returned Bundle profile",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.meta.profile",
            "value": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport-bundle",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of patient resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.count() - Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count() - Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).evaluatedResource.count()",
            "operator": "equals",
            "value": "0",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Result-EvaluatedResources-Count-In-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Result-EvaluatedResources-Multiple-In-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Result-EvaluatedResources-Multiple-In-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Result-EvaluatedResources-Multiple-In-RA",
      "name": "Result-EvaluatedResources-Multiple-In-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get MeasureReport result. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/result-evaluatedresources-multiple-in-ra",
        "description": "Patient subject."
      }, {
        "name": "expectedNumMeasureReports",
        "defaultValue": "1",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      }, {
        "name": "expectedNumEvaluatedResources",
        "defaultValue": "6",
        "description": "Number of expected evaluatedResources resources in MeasureReport.  Will be validated in the test."
      }, {
        "name": "expectedNumBundleEntries",
        "defaultValue": "6",
        "description": "Number of expected Bundle entries in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "Result-EvaluatedResources-Multiple-In",
        "name": "Result-EvaluatedResources-Multiple-In",
        "description": "Query for the Risk Adjustment MeasureReport using subject/Patient in parameters. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm the returned Bundle profile",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.meta.profile",
            "value": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport-bundle",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of Bundle entries expected in the response.  They should account for duplicates in the evaluatedResources.",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.count()",
            "operator": "equals",
            "value": "${expectedNumBundleEntries}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of MeasureReport resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumMeasureReports}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of evaluatedResource resource elements expected in the MeasureReport",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).evaluatedResource.count()",
            "operator": "equals",
            "value": "${expectedNumEvaluatedResources}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Result-EvaluatedResources-Multiple-In-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Result-One-In-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Result-One-In-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Result-One-In-RA",
      "name": "Result-One-In-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/ra-patient01",
        "description": "Patient subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "1",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "Result-One-In",
        "name": "Result-One-In",
        "description": "Query for the gaps in care using subject/Patient in parameters. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm the returned Bundle profile",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.meta.profile",
            "value": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport-bundle",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of parameter elements expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.count()",
            "operator": "equals",
            "value": "1",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of Bundle entries expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.count()",
            "operator": "equals",
            "value": "21",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Result-One-In-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Result-Profile-In-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Result-Profile-In-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Result-Profile-In-RA",
      "name": "Result-Profile-In-RA-json",
      "status": "active",
      "date": "2022-05-01",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Test Conformance to profiles.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RABundleProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-bundle"
      } ],
      "variable": [ {
        "name": "bundleId",
        "defaultValue": "result-profile-in-ra",
        "description": "Enter a resource id for a valid Bundle on the destination system."
      }, {
        "name": "expectedNumBundleEntries",
        "defaultValue": "7",
        "description": "Number of expected Bundle entries in response.  Will be validated in the test."
      }, {
        "name": "expectedNumCompositions",
        "defaultValue": "1",
        "description": "Number of expected Composition resources in response.  Will be validated in the test."
      }, {
        "name": "expectedNumMeasureReports",
        "defaultValue": "1",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      }, {
        "name": "expectedNumDetectedIssues",
        "defaultValue": "1",
        "description": "Number of expected DetectedIssues resources in response.  Will be validated in the test."
      }, {
        "name": "expectedNumPatients",
        "defaultValue": "1",
        "description": "Number of expected Patient resources in response.  Will be validated in the test."
      }, {
        "name": "expectedNumEvaluatedResources",
        "defaultValue": "3",
        "description": "Number of expected evaluatedResources resources in MeasureReport.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "Result-Profile-In",
        "name": "Result-Profile-In",
        "description": "Query for the RA Bundles. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://terminology.hl7.org/CodeSystem/testscript-operation-codes",
              "code": "read"
            },
            "resource": "Bundle",
            "description": "Bundle read operation with HTTP Header Accept set to JSON format.",
            "accept": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "origin": 1,
            "params": "/${bundleId}",
            "responseId": "ReadBundleResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Bundle.",
            "direction": "response",
            "resource": "Bundle",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Bundle profile.",
            "direction": "response",
            "validateProfileId": "RABundleProfile",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm the returned Composition profile",
            "direction": "response",
            "operator": "equals",
            "path": "Bundle.entry[0].resource.meta.profile",
            "value": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-composition",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm the returned MeasureReport profile",
            "direction": "response",
            "operator": "equals",
            "path": "Bundle.entry[1].resource.meta.profile",
            "value": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm the returned DetectedIssue profile",
            "direction": "response",
            "operator": "equals",
            "path": "Bundle.entry[2].resource.meta.profile",
            "value": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-detectedissue",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Document.",
            "direction": "response",
            "operator": "equals",
            "path": "Bundle.type",
            "value": "document",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of Bundle entries expected in the response",
            "direction": "response",
            "expression": "Bundle.entry.count()",
            "operator": "equals",
            "value": "${expectedNumBundleEntries}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of Composition resources expected in the response",
            "direction": "response",
            "expression": "Bundle.entry.resource.where(ofType(Composition)).count()",
            "operator": "equals",
            "value": "${expectedNumCompositions}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of MeasureReport resources expected in the response",
            "direction": "response",
            "expression": "Bundle.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumMeasureReports}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of DetectedIssue resources expected in the response",
            "direction": "response",
            "expression": "Bundle.entry.resource.where(ofType(DetectedIssue)).count()",
            "operator": "equals",
            "value": "${expectedNumDetectedIssues}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of Patient resources expected in the response",
            "direction": "response",
            "expression": "Bundle.entry.resource.where(ofType(Patient)).count()",
            "operator": "equals",
            "value": "${expectedNumPatients}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of evaluatedResource elements expected in the MeasureReport",
            "direction": "response",
            "expression": "Bundle.entry.resource.where(ofType(MeasureReport)).evaluatedResource.count()",
            "operator": "equals",
            "value": "${expectedNumEvaluatedResources}",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Result-Profile-In-RA"
    }
  }, {
    "resource": {
      "resourceType": "TestScript",
      "id": "Result-Two-In-RA",
      "meta": {
        "profile": [ "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript" ]
      },
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n      <p>Result-Two-In-RA-json</p>\n    </div>"
      },
      "extension": [ {
        "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-rule",
        "extension": [ {
          "url": "ruleId",
          "valueId": "assert-by-path"
        }, {
          "url": "path",
          "valueString": "/FHIRCommon/_reference/rule/AssertValidateJSONExtractProfileId.groovy"
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "jsonPath"
          }, {
            "url": "value",
            "valueString": "$.entry[?(@.resource.resourceType == 'MeasureReport')].resource"
          } ]
        }, {
          "url": "param",
          "extension": [ {
            "url": "name",
            "valueString": "profileId"
          }, {
            "url": "value",
            "valueString": "RAMeasureReportProfile"
          } ]
        } ]
      } ],
      "url": "http://wildfhir.aegis.net/fhir4-0-1/TestScript/Result-Two-In-RA",
      "name": "Result-Two-In-RA-json",
      "status": "active",
      "date": "2021-06-22",
      "publisher": "AEGIS.net, Inc.",
      "contact": [ {
        "name": "Touchstone Support",
        "telecom": [ {
          "system": "email",
          "value": "Touchstone_Support@aegis.net",
          "use": "work"
        } ]
      } ],
      "description": "Get all gaps for variable parameters. All $report operations are performed using the FHIR Operation Framework HTTP GET method with url inline parameters. Preconditions: Server has pre-loaded the Clinical Reasoning standard test data set patient and measure data for the patient.  The request is for json format as a default.",
      "copyright": "(c) AEGIS.net, Inc. 2021",
      "origin": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-origin-types",
          "code": "FHIR-Client"
        }
      } ],
      "destination": [ {
        "index": 1,
        "profile": {
          "system": "http://hl7.org/fhir/testscript-profile-destination-types",
          "code": "FHIR-Server"
        }
      } ],
      "profile": [ {
        "id": "RAMeasureReportProfile",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport"
      }, {
        "id": "ParametersProfileBase",
        "reference": "http://hl7.org/fhir/StructureDefinition/Parameters"
      }, {
        "id": "BundleProfileBase",
        "reference": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport-bundle"
      } ],
      "variable": [ {
        "name": "periodStart",
        "defaultValue": "2021-01-01",
        "description": "Default start of a gaps through period."
      }, {
        "name": "periodEnd",
        "defaultValue": "2021-12-31",
        "description": "Default end of a gaps through period."
      }, {
        "name": "subject",
        "defaultValue": "Patient/ra-patient03",
        "description": "Patient subject."
      }, {
        "name": "expectedNumReports",
        "defaultValue": "2",
        "description": "Number of expected MeasureReport resources in response.  Will be validated in the test."
      } ],
      "test": [ {
        "id": "Result-Two-In",
        "name": "Result-Two-In",
        "description": "Query for the gaps in care using subject/Patient in parameters. Expected response is 200 (OK).",
        "action": [ {
          "operation": {
            "type": {
              "system": "http://touchstone.com/fhir/testscript-operation-codes-extended",
              "code": "report"
            },
            "resource": "MeasureReport",
            "description": "Run the $report operation.",
            "accept": "json",
            "contentType": "json",
            "destination": 1,
            "encodeRequestUrl": true,
            "method": "get",
            "origin": 1,
            "params": "/$report?periodStart=${periodStart}&periodEnd=${periodEnd}&subject=${subject}",
            "responseId": "searchResponse"
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the request HTTP Header Accept contains 'charset=utf-8'.",
            "direction": "request",
            "headerField": "Accept",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned HTTP status is 200(OK).",
            "direction": "response",
            "response": "okay",
            "warningOnly": false
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type format is the FHIR mime-type 'application/fhir+json'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "application/fhir+json",
            "warningOnly": true
          }
        }, {
          "assert": {
            "description": "Confirm that the response HTTP Header Content-Type contains 'charset=utf-8'.",
            "direction": "response",
            "headerField": "Content-Type",
            "operator": "contains",
            "value": "charset=utf-8",
            "warningOnly": true
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned resource type is a Parameters.",
            "direction": "response",
            "resource": "Parameters",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Validate the response Parameters. Warning only to allow for review of results.",
            "direction": "response",
            "validateProfileId": "ParametersProfileBase",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm the returned Bundle profile",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.meta.profile",
            "value": "http://hl7.org/fhir/us/davinci-ra/StructureDefinition/ra-measurereport-bundle",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Confirm that the returned Bundle type is Collection.",
            "direction": "response",
            "operator": "equals",
            "path": "Parameters.parameter.resource.type",
            "value": "collection",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of report resources expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.resource.where(ofType(MeasureReport)).count()",
            "operator": "equals",
            "value": "${expectedNumReports}",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of parameter elements expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.count()",
            "operator": "equals",
            "value": "1",
            "warningOnly": false
          }
        }, {
          "assert": {
            "extension": [ {
              "url": "http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript-assert-stopTestOnFail",
              "valueBoolean": false
            } ],
            "description": "Verify that there are the number of Bundle entries expected in the response",
            "direction": "response",
            "expression": "Parameters.parameter.resource.entry.count()",
            "operator": "equals",
            "value": "5",
            "warningOnly": false
          }
        } ]
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "TestScript/Result-Two-In-RA"
    }
  } ]
}